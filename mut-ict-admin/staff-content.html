<div class="row mb-4">
    <div class="col-md-3">
        <div class="card card-admin text-white bg-primary mb-3">
            <div class="card-body d-flex justify-content-between align-items-center">
                <div>
                    <h6 class="card-title">Total Staff</h6>
                    <h2 class="mb-0" id="totalStaffCount">0</h2>
                </div>
                <i class="fas fa-users fa-3x opacity-50"></i>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card card-admin text-white bg-success mb-3">
            <div class="card-body d-flex justify-content-between align-items-center">
                <div>
                    <h6 class="card-title">Academic</h6>
                    <h2 class="mb-0" id="academicStaffCount">0</h2>
                </div>
                <i class="fas fa-chalkboard-teacher fa-3x opacity-50"></i>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card card-admin text-white bg-warning mb-3">
            <div class="card-body d-flex justify-content-between align-items-center">
                <div>
                    <h6 class="card-title">Admin Staff</h6>
                    <h2 class="mb-0" id="adminStaffCount">0</h2>
                </div>
                <i class="fas fa-user-cog fa-3x opacity-50"></i>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card card-admin text-white bg-info mb-3">
            <div class="card-body d-flex justify-content-between align-items-center">
                <div>
                    <h6 class="card-title">Departments</h6>
                    <h2 class="mb-0" id="departmentCount">0</h2>
                </div>
                <i class="fas fa-building fa-3x opacity-50"></i>
            </div>
        </div>
    </div>
</div>

<div class="card-admin" id="staffSection">
    <div class="card-header-admin d-flex justify-content-between align-items-center">
        <h5 class="mb-0"><i class="fas fa-users me-2"></i> Staff Management</h5>
        <button class="btn btn-mut btn-sm" id="addStaffBtn">
            <i class="fas fa-plus me-1"></i> Add Staff
        </button>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table id="staffTable" class="table table-striped" style="width:100%">
                <thead>
                    <tr>
                        <th>Photo</th>
                        <th>Name</th>
                        <th>Position</th>
                        <th>Department</th>
                        <th>Email</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
</div>

<div class="card-admin mt-4" id="departmentsSection">
    <div class="card-header-admin d-flex justify-content-between align-items-center">
        <h5 class="mb-0"><i class="fas fa-building me-2"></i> Departments</h5>
        <button class="btn btn-mut btn-sm" id="addDepartmentBtn">
            <i class="fas fa-plus me-1"></i> Add Department
        </button>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table id="departmentsTable" class="table table-striped" style="width:100%">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Head</th>
                        <th>Staff Count</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
</div>

<div class="modal fade" id="staffModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staffModalTitle">Add New Staff Member</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="staffForm">
                    <input type="hidden" id="staffId">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="image-upload-container" id="imageUploadContainer">
                                <i class="fas fa-user-circle"></i>
                                <p>Click to upload photo</p>
                                <input type="file" id="staffImageUpload" accept="image/*" style="display: none;">
                                <div class="progress mt-2" id="uploadProgress" style="display: none;">
                                    <div class="progress-bar" role="progressbar" style="width: 0%"></div>
                                </div>
                            </div>
                            <img src="" id="staffImagePreview" class="avatar-preview" style="display: none; position: relative;">
                            <button type="button" id="removeImageBtn" class="btn btn-danger btn-sm" style="display:none; position: absolute; top: 5px; right: 5px; border-radius: 50%; padding: 0 6px; font-size: 14px; line-height: 1;">&times;</button>
                            <input type="hidden" id="staffImageUrl">
                        </div>
                        <div class="col-md-8">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="staffTitle" class="form-label">Title</label>
                                    <select class="form-select" id="staffTitle">
                                        <option value="Mr.">Mr.</option>
                                        <option value="Mrs.">Mrs.</option>
                                        <option value="Ms.">Ms.</option>
                                        <option value="Dr.">Dr.</option>
                                        <option value="Prof.">Prof.</option>
                                    </select>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="staffFirstName" class="form-label">First Name</label>
                                    <input type="text" class="form-control" id="staffFirstName" required>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="staffLastName" class="form-label">Last Name</label>
                                    <input type="text" class="form-control" id="staffLastName" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="staffPosition" class="form-label">Position</label>
                                    <select class="form-select" id="staffPosition" required>
                                        <option value="">Select position</option>
                                        <option value="Head of Department">Head of Department</option>
                                        <option value="Senior Lecturer">Senior Lecturer</option>
                                        <option value="Lecturer">Lecturer</option>
                                        <option value="Associate Professor">Associate Professor</option>
                                        <option value="Professor">Professor</option>
                                        <option value="Department Administrator">Department Administrator</option>
                                        <option value="IT Technician">IT Technician</option>
                                        <option value="Secretary">Secretary</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="staffDepartment" class="form-label">Department</label>
                                    <select class="form-select" id="staffDepartment" required>
                                        <option value="">Select department</option>
                                    </select>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="staffEmail" class="form-label">Email</label>
                                    <input type="email" class="form-control" id="staffEmail" required>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="staffPhone" class="form-label">Phone</label>
                                    <input type="tel" class="form-control" id="staffPhone">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="staffOffice" class="form-label">Office</label>
                                    <input type="text" class="form-control" id="staffOffice">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Expertise</label>
                            <div class="tag-input-container" id="expertiseContainer">
                                <input type="text" id="expertiseInput" placeholder="Add expertise">
                            </div>
                            <input type="hidden" id="staffExpertise">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="staffType" class="form-label">Staff Type</label>
                            <select class="form-select" id="staffType" required>
                                <option value="academic">Academic</option>
                                <option value="admin">Administrative</option>
                                <option value="technical">Technical</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="staffBio" class="form-label">Biography</label>
                        <textarea class="form-control" id="staffBio" rows="3"></textarea>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="staffEducation" class="form-label">Education (one per line)</label>
                            <textarea class="form-control" id="staffEducation" rows="3"></textarea>
                        </div>
                        <div class="col-md-6 mb-3" id="coursesTaughtContainer">
                            <label for="staffCourses" class="form-label">Courses Taught (one per line)</label>
                            <textarea class="form-control" id="staffCourses" rows="3"></textarea>
                        </div>
                    </div>
                    <div class="mb-3" id="publicationsContainer">
                        <label for="staffPublications" class="form-label">Publications (one per line)</label>
                        <textarea class="form-control" id="staffPublications" rows="3"></textarea>
                    </div>
                    <div class="mb-3" id="keyResponsibilitiesContainer" style="display: none;">
                        <label for="staffKeyResponsibilities" class="form-label">Key Responsibilities</label>
                        <textarea class="form-control" id="staffKeyResponsibilities" rows="3"></textarea>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Social Links</label>
                        <div class="row">
                            <div class="col-md-6 mb-2">
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fab fa-linkedin"></i></span>
                                    <input type="url" class="form-control" id="staffLinkedin" placeholder="LinkedIn URL">
                                </div>
                            </div>
                            <div class="col-md-6 mb-2">
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fab fa-twitter"></i></span>
                                    <input type="url" class="form-control" id="staffTwitter" placeholder="Twitter URL">
                                </div>
                            </div>
                            <div class="col-md-6 mb-2">
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fab fa-researchgate"></i></span>
                                    <input type="url" class="form-control" id="staffResearchgate" placeholder="ResearchGate URL">
                                </div>
                            </div>
                            <div class="col-md-6 mb-2">
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fas fa-graduation-cap"></i></span>
                                    <input type="url" class="form-control" id="staffGoogleScholar" placeholder="Google Scholar URL">
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-mut" id="saveStaffBtn">Save Staff</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="departmentModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="departmentModalTitle">Add New Department</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="departmentForm">
                    <input type="hidden" id="departmentId">
                    <div class="mb-3">
                        <label for="departmentName" class="form-label">Department Name</label>
                        <input type="text" class="form-control" id="departmentName" required>
                    </div>
                    <div class="mb-3">
                        <label for="departmentHead" class="form-label">Department Head</label>
                        <select class="form-select" id="departmentHead">
                            <option value="">Select department head</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="departmentDescription" class="form-label">Description</label>
                        <textarea class="form-control" id="departmentDescription" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-mut" id="saveDepartmentBtn">Save Department</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="confirmationModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Confirm Action</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="confirmationMessage">
                Are you sure you want to delete this staff member?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelActionBtn" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirmActionBtn">Confirm</button>
                <button type="button" class="btn btn-primary" id="errorOkBtn" style="display:none;" data-bs-dismiss="modal">OK</button>
            </div>
        </div>
    </div>
</div>